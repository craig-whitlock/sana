<!-- Same <head> and styles as before, skip to the <body> for brevity -->

    <body>
        <div class="container">
          <h2>Paving Slab Calculator</h2>
      
          <div class="section">
            <h3>Paving Area</h3>
            <div class="row">
              <div>
                <label for="areaLength">Length (m)</label>
                <input type="number" id="areaLength" step="0.01">
              </div>
              <div>
                <label for="areaWidth">Width (m)</label>
                <input type="number" id="areaWidth" step="0.01">
              </div>
            </div>
      
            <h3>Slab Size</h3>
            <div class="row">
              <div>
                <label for="slabSize">Choose Slab Size</label>
                <select id="slabSize" onchange="toggleCustomSlab()">
                  <option value="600x600">600 x 600 mm</option>
                  <option value="450x450">450 x 450 mm</option>
                  <option value="600x450">600 x 450 mm</option>
                  <option value="custom">Custom Size</option>
                </select>
              </div>
            </div>
      
            <div class="row" id="customSlabFields">
              <div>
                <label for="customLength">Custom Length (mm)</label>
                <input type="number" id="customLength">
              </div>
              <div>
                <label for="customWidth">Custom Width (mm)</label>
                <input type="number" id="customWidth">
              </div>
            </div>
      
            <button onclick="calculateSlabs()">Calculate</button>
      
            <div id="slabResults" class="results-box" style="display: none;"></div>
          </div>
      
          <div class="footnote">
            This is an estimation only and includes 10% allowance for wastage.  
          </div>
        </div>
      
        <script>
          function toggleCustomSlab() {
            const size = document.getElementById("slabSize").value;
            const customFields = document.getElementById("customSlabFields");
            customFields.style.display = size === "custom" ? "flex" : "none";
          }
      
          function calculateSlabs() {
            const length = parseFloat(document.getElementById("areaLength").value);
            const width = parseFloat(document.getElementById("areaWidth").value);
            const size = document.getElementById("slabSize").value;
            const results = document.getElementById("slabResults");
      
            if (isNaN(length) || isNaN(width) || length <= 0 || width <= 0) {
              results.style.display = "block";
              results.innerHTML = "<strong>Please enter valid area dimensions.</strong>";
              sendHeight();
              return;
            }
      
            let slabLength, slabWidth;
      
            if (size === "custom") {
              slabLength = parseFloat(document.getElementById("customLength").value);
              slabWidth = parseFloat(document.getElementById("customWidth").value);
              if (isNaN(slabLength) || isNaN(slabWidth) || slabLength <= 0 || slabWidth <= 0) {
                results.style.display = "block";
                results.innerHTML = "<strong>Please enter valid custom slab size.</strong>";
                sendHeight();
                return;
              }
            } else {
              const parts = size.split("x");
              slabLength = parseFloat(parts[0]);
              slabWidth = parseFloat(parts[1]);
            }
      
            const area = length * width;
            const slabArea = (slabLength / 1000) * (slabWidth / 1000);
            const slabsNeeded = Math.ceil((area / slabArea) * 1.1); // 10% wastage
      
            // Material Estimates
            const subBaseDepth = 0.1; // 100mm
            const sandDepth = 0.03;   // 30mm
            const subBaseTonnes = (area * subBaseDepth * 2); // MOT Type 1 (~2 tonnes/m³)
            const sandTonnes = (area * sandDepth * 1.6);      // Sharp Sand (~1.6 tonnes/m³)
            const cementBags = Math.ceil(area * 0.2);         // ~0.2 bags per m²
      
            // Jointing compound (e.g. resin jointing) — assume 8m² per tub
            const jointingTubs = Math.ceil(area / 8);
      
            results.style.display = "block";
            results.innerHTML = `
              <div class="result-group">
                <div class="result-number">${area.toFixed(2)} m²</div>
                <div class="result-label">Paving Area</div>
              </div>
              <div class="result-group">
                <div class="result-number">${slabsNeeded}</div>
                <div class="result-label">Estimated Slabs Needed</div>
              </div>
              <div class="result-extra">Sub-base (MOT Type 1): <strong>${subBaseTonnes.toFixed(1)} tonnes</strong><br>
              <small>Based on a compacted depth of 100mm.</small></div>
              <div class="result-extra">Sharp Sand: <strong>${sandTonnes.toFixed(1)} tonnes</strong><br>
              <small>Based on a bedding layer of 30mm.</small></div>
              <div class="result-extra">Cement (25kg bags): <strong>${cementBags}</strong><br>
              <small>Estimated for bedding mortar mix.</small></div>
              <div class="result-extra">Jointing Compound: <strong>${jointingTubs}</strong> tub(s)<br>
              <small>Estimated at 8 m² coverage per tub (5mm joints, 25mm depth).</small></div>
            `;
      
            sendHeight();
          }
      
          function sendHeight() {
            const height = document.body.scrollHeight;
            parent.postMessage(height, "*");
          }
      
          window.onload = () => {
            sendHeight();
            setTimeout(sendHeight, 500);
          };
      
          window.addEventListener("resize", sendHeight);
        </script>
      </body>